{% extends "base.html" %}
{% block content %}

<h2 class="text-3xl font-bold text-indigo-700 mb-6">My Attempts</h2>

<div class="bg-white p-6 rounded-xl shadow space-y-4">
  {% if attempts %}
    <div class="grid gap-3">
      {% for a in attempts %}
      <div class="p-4 rounded-lg border flex items-center justify-between">
        <div>
          <div class="text-lg font-semibold">Mode: {{ a.mode | capitalize }}</div>
          <div class="text-sm text-gray-600">Score: {{ a.score }} · Started: {{ a.started_at }} · Ended: {{ a.ended_at or '—' }}</div>
          {% if user_cache and user_cache.get(a.user_id) %}
            <div class="text-sm text-gray-500">Student: {{ user_cache.get(a.user_id) }}</div>
          {% endif %}
        </div>

        <div class="flex items-center gap-3">
          <a href="{{ url_for('quiz.results', attempt_id=a.id) }}" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded">View</a>
          {% if current_user.role.value == 'teacher' %}
          <form action="{{ url_for('teacher.delete_question', qid=0) }}" method="post" style="display:none;"></form>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-600">No attempts yet — go take a quiz!</p>
  {% endif %}
</div>

{% endblock %}
